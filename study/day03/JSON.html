<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title></title>
	<link rel="stylesheet" href="">
</head>
<body>
	<script>
		//js的方式定义对象 
	var people = { name:'xxx',
	               age:20,
	               eat:function(){}
	           };

	//JSON 格式：JSON主要是为了描述数据，所以没有函数概念，有没有变量的概念,JSON中的数据都是key value的结构，注意：key 一定要用双引号
	//2:结尾不用分号，因为不是语句
	//3:value 取值，可是字符串，可以使数字，不支持undefine ,支持null，可以数组(数组中可以是对象)，也可是其他对象
	// {
	// 	"name":"xxxx",
	// 	"age":20,
	// 	"date":null,
	// 	"friends":["a","b"],
 //        "book":{ 
 //        	      "bookName":"sss",
 //                  "name":"test" 
 //               }
	// }

	//[] 代表数组 {} 代表对象 ，他们之间可以相互嵌套
	// [
	//    "book1":{},
	//    "book2":{},
	//    "book3":{}
	// ]

	//JSON对象和JS 对象之间的转换
    var book = {
    	name:"书名",
    	number:100,
    	author:["作者1","作者2","作者3"],
    	year:2015
    };

    //JSON 全局对象来完成JSON和JS对象之间的转换
    var jsonText = JSON.stringify(book);
    console.log(jsonText);

    //把json字符串，转成JS对象
    //book2 是新生成的对象，和book 对象没关系
    var book2 = JSON.parse(jsonText);
    //通过对象访问属性
    console.log(book2.name);

    //转换时控制
    //对象转成字符串时控制
    //参数1:传入的对象
    //2:控制函数，
    //3:控制缩进的，把转换后的字符串格式化 4代表缩进4个空格
    var jonsText2 = JSON.stringify(book,function(key,value){
        switch(key){
        	case 'name':
        	   return '西游记';
        	case 'author':
        	   return value.join('-');
        	default:
        	   return value;
        }
    },4);

    console.log(jonsText2);

    //把字符串转换成 JS 对象
    //使用控制函数来控制转换的过程
    var book3 = JSON.parse(jsonText,function(key,value){
    	switch(key){
    		case 'year':
	    		 var date = new Date();
	    		 return date.getFullYear();
    		default:
    		     return value;
    	}
    });
    console.log(book3.year);
	</script>
</body>
</html>